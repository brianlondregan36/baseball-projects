<!DOCTYPE html>
<html>
<head>
	<title>Lineup Builder</title>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<link rel=stylesheet type=text/css href="{{ url_for('static', filename='style.css') }}">
	<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/themes/smoothness/jquery-ui.css">
	<link rel='shortcut icon' href='{{ url_for('static', filename='bceltic.ico') }}' type='image/x-icon'/ >
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>
</head>
<body>

<div class="top-container" id="top">
	<div class="">
		<header>
			<div class="header-row">
				<span class="header-title">2015 Mets of Queens</span>
				<div class="nav-spacer"></div>
				<nav>
					<a class="nav-link" href="/">Home</a>
				</nav>
			</div>
		</header>
	</div> 
</div>

<br><br><br>
<p style="display:inline">Choose a point in the 2015 Season:</p>
<select id="gameselect" onchange="BuildCards()">
	<option value="1">Game 1</option>
	<option value="150">Game 150</option>
</select>
<br><br>

<div id="contain">
<div id="startingblock"></div>
<div id="lineup">
<table><tbody>
<tr><td class="pos">1st</td><td class="snap-position"></td></tr>
<tr><td class="pos">2nd</td><td class="snap-position"></td></tr>
<tr><td class="pos">3rd</td><td class="snap-position"></td></tr>
<tr><td class="pos">4th</td><td class="snap-position"></td></tr>
<tr><td class="pos">5th</td><td class="snap-position"></td></tr>
<tr><td class="pos">6th</td><td class="snap-position"></td></tr>
<tr><td class="pos">7th</td><td class="snap-position"></td></tr>
<tr><td class="pos">8th</td><td class="snap-position"></td></tr>
<tr><td class="pos">9th</td><td class="snap-position"></td></tr>
</tbody></table>
</div>
</div>



<script>
(function BuildCards(gameNo){

	if(!gameNo){
		gameNo = document.getElementById("gameselect").value;
	}
	alert(gameNo);
	$.ajax({
		url: "{{ url_for('static', filename='playerstatlist15.js') }}",
		cache: false,
		type: "GET",
		dataType: "json",
		success: function(data, textStatus) {
			console.log(textStatus);
			
			$.each(data, function(i, field){
				if(field.GAMENO == gameNo){
				alert("match");
				var id = "draggable-card-" + field.ID;
				var html = '<div id="' + id + '" class="draggable-card ui-widget-content">';
				html = html + '<img src="' + field.IMG + '"/>';
				html = html + '<div><p>' + field.NAME + ', ' + field.POS + '</p></div>';
				html = html + '<div><p>'+ field.STATS + '</p></div>';
				html = html + '</div>';
				$('#startingblock').append(html);
				$( '#' + id ).draggable({ containment: "#contain", snap: ".snap-position", snapMode: "inner", snapTolerance: 10});
				}
			});
		}
    });		
})('1');
BuildCards("150");
BuildCards();


//on change, buildCards and pass in the gameNo
</script>
</body>
</html>
