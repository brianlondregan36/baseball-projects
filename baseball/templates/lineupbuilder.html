<!DOCTYPE html>
<html>
<head>
	<title>Lineup Builder</title>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/themes/smoothness/jquery-ui.css">
	<link rel='shortcut icon' href='{{ url_for('static', filename='bceltic.ico') }}' type='image/x-icon'/ >
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>
	
	<style>
		div.draggable-card{
			width:400px;
			height:100px;
			border: solid 2px #FF3300;
			border-radius: 8px;
			-moz-border-radius: 8px; 
			-webkit-border-radius: 8px; 	
			overflow:hidden;
		}
		div.draggable-card img{
			width:60px;
			height:auto;
			float:left;
			padding-left:2px;
			padding-top:2px;
			padding-right:5px;
		}
		.ui-draggable-handle{
			cursor:move;
		}
		div#contain{
			width:100%;
			height:620px; 
			overflow-x: hidden;
			overflow-y:scroll; 
		}
		div#startingblock{
			width:55%; 
			float:left;
		}
		div#lineup{
			width:45%;
			float:left;
		}
		div#lineup table tr{
			height: 104px;
			min-height: 100px;
		}
		.pos{
			min-width:20px; 
			font-size:18px;
			font-weight: bold;
			color:#005ce6;
		}
		.snap-position{
			width: 404px;
			border: dashed 1px #FF3300;
		}
</style>
</head>


<body onload="BuildCards(1)">

<div class="top-container" id="top">
	<div class="">
		<header>
			<div class="header-row">
				<span class="header-title">2015 Mets of Queens</span>
				<div class="nav-spacer"></div>
				<nav>
					<a class="nav-link" href="/">Home</a>
				</nav>
			</div>
		</header>
	</div> 
</div>

<br><br><br>
<p style="display:inline">Choose a point in the 2015 Season:</p>
<select id="gameselect" onchange="Clear()">
	<option value="1">Opening Day</option>
	<option value="90">Just before Allstar Break</option>
	<option value="103">After the Trade Dealine</option>
</select>
<br><br>

<div id="contain">
<div id="startingblock"></div>
<div id="lineup">
<table><tbody>
<tr><td class="pos">1st</td><td class="snap-position"></td></tr>
<tr><td class="pos">2nd</td><td class="snap-position"></td></tr>
<tr><td class="pos">3rd</td><td class="snap-position"></td></tr>
<tr><td class="pos">4th</td><td class="snap-position"></td></tr>
<tr><td class="pos">5th</td><td class="snap-position"></td></tr>
<tr><td class="pos">6th</td><td class="snap-position"></td></tr>
<tr><td class="pos">7th</td><td class="snap-position"></td></tr>
<tr><td class="pos">8th</td><td class="snap-position"></td></tr>
<tr><td class="pos">9th</td><td class="snap-position"></td></tr>
</tbody></table>
</div>
</div>



<script>

function Clear(){
	$('#startingblock').empty();
	gameNo = document.getElementById("gameselect").value;
	BuildCards(gameNo);
}

function BuildCards(gameNo){
	$.ajax({
		url: "{{ url_for('static', filename='playerstatlist15.js') }}",
		cache: false,
		type: "GET",
		dataType: "json",
		success: function(data, textStatus) {
			$.each(data, function(i, field){
				if(field.GAMENO == gameNo){
					var id = "draggable-card-" + field.ID;
					var html = '<div id="' + id + '" class="draggable-card ui-widget-content">';
					html = html + '<img src="' + field.IMG + '"/>';
					html = html + '<div><p>' + field.NAME + ', ' + field.POS + '</p></div>';
					html = html + '<div><p>'+ field.STATS + '</p></div>';
					html = html + '</div>';
					$('#startingblock').append(html);
					$( '#' + id ).draggable({ containment: "#contain", snap: ".snap-position", snapMode: "inner", snapTolerance: 16});
				}
			});
		}
    });		
}

</script>

</body>
</html>
