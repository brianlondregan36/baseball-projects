<!DOCTYPE html>
<html lang="en">

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
	<title>Runs-Scored Gauntlet Results</title>
	<link rel=stylesheet type=text/css href="{{ url_for('static', filename='style.css') }}">
	<link rel='shortcut icon' href='{{ url_for('static', filename='bceltic.ico') }}' type='image/x-icon'/ >
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
	<script>
	$(document).ready(function(){
		var teamCodes = ['TBR', 'NYY', 'TOR', 'BAL', 'BOS', 'KCR', 'MIN', 'DET', 'CLE', 'CHW', 'HOU', 'TEX', 'LAA', 'SEA', 'OAK', 'WSN', 'NYM', 'ATL', 'MIA', 'PHI', 'STL', 'PIT', 'CHC', 'CIN', 'MIL', 'LAD', 'SFG', 'ARI', 'SDP', 'COL'];	
		var accomplished = [];
	
		$('p.results').each(function(){
			$(this).hide(); 
			var team_code = $(this).text();		
			accomplished.push(team_code); 	
		});
	
		for(var i = 0; i < teamCodes.length; i++)
		{
			var img = document.createElement("IMG"); 
			var tempSrc = "{{ url_for('static', filename='images/TBR.jpg') }}"
			var src = tempSrc.replace("TBR", teamCodes[i]);
			img.setAttribute("src", src); 
			img.setAttribute("alt", teamCodes[i]);
			if( accomplished.indexOf(teamCodes[i]) != -1 )
			{
				img.setAttribute("class", "accomplished-image");
			
				$('p.results').each(function(){
					if( teamCodes[i] == $(this).text() )
					{
						var gameNo = $(this).attr('data-game-number');
						img.setAttribute("title", "" + teamCodes[i] + " did it in " + gameNo + " games");
						return false;
					}
				});
			}
			else
			{
				img.setAttribute("class", "non-accomplished-image");
			}
		
			$("#main").append(img);
		}
	
		var c = $( '#main img.accomplished-image' ).length; 
		$( '#count' ).text(c);
	});
	</script>
</head>


<body>
	<h1>MLB Runs-Scored Gauntlet Results...</h1> 
	<p class="explanation">Here are the MLB teams that logged final scores of 1 run scored, 2 runs scored, all the way up to 13 runs scored in the {{request.args.get('year', '')}} season...</p>
	<div id="main"></div>
	<p class="explanation"><span id="count"></span> teams accomplished this offensive feat.</p>

{% for key, value in rows.iteritems() %}
	<p class="results" data-game-number="{{ value }}">{{ key }}</p>
	{% endfor %}
</body>
</html>
